<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ReviewResq – Feedback</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #f3f4f6;
      --card: #ffffff;
      --primary: #0a2540;
      --accent: #1b73e8;
      --muted: #6b7280;
      --border: #e5e7eb;
      --gold: #f5b000;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      background: radial-gradient(circle at top, #e0edff, #f3f4f6);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
      color: var(--primary);
    }

    .card {
      width: 100%;
      max-width: 420px;
      background: var(--card);
      border-radius: 18px;
      box-shadow:
        0 18px 40px rgba(15, 23, 42, 0.12),
        0 0 0 1px rgba(148, 163, 184, 0.15);
      padding: 22px 22px 18px;
    }

    .brand-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 18px;
    }

    .business-name {
      font-weight: 600;
      font-size: 15px;
      letter-spacing: 0.03em;
      text-transform: uppercase;
      color: var(--muted);
    }

    .rr-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      color: #9ca3af;
    }

    .rr-logo {
      width: 22px;
      height: 22px;
      border-radius: 999px;
      background: linear-gradient(135deg, var(--primary), var(--accent));
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 12px;
      font-weight: 700;
    }

    .title {
      font-size: 20px;
      font-weight: 650;
      margin-bottom: 4px;
    }

    .subtitle {
      font-size: 13px;
      color: var(--muted);
      margin-bottom: 16px;
    }

    .pill-row {
      display: flex;
      gap: 8px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .pill {
      font-size: 11px;
      padding: 4px 9px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      color: #4b5563;
      background: #f9fafb;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .pill-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: var(--accent);
    }

    .rating-section {
      text-align: center;
      padding: 14px 0 10px;
      border-radius: 14px;
      background: #f9fafb;
      border: 1px solid #e5e7eb;
      margin-bottom: 12px;
    }

    .rating-label {
      font-size: 13px;
      margin-bottom: 6px;
      color: var(--muted);
    }

    .stars {
      display: flex;
      justify-content: center;
      gap: 6px;
      margin-bottom: 4px;
    }

    .star {
      font-size: 26px;
      cursor: pointer;
      transition: transform 0.1s ease, filter 0.1s ease;
      filter: grayscale(0.2);
    }

    .star.selected {
      color: var(--gold);
      filter: none;
      transform: translateY(-1px);
    }

    .current-rating {
      font-size: 11px;
      color: var(--muted);
    }

    .view {
      display: none;
      margin-top: 8px;
    }

    .view.active {
      display: block;
    }

    .view-title {
      font-size: 15px;
      font-weight: 600;
      margin-bottom: 6px;
    }

    .view-text {
      font-size: 13px;
      color: var(--muted);
      margin-bottom: 12px;
    }

    textarea {
      width: 100%;
      min-height: 80px;
      border-radius: 10px;
      border: 1px solid var(--border);
      padding: 8px 9px;
      font-size: 13px;
      resize: vertical;
      margin-bottom: 8px;
    }

    textarea:focus {
      outline: 2px solid var(--accent);
      outline-offset: 1px;
      border-color: transparent;
    }

    .field-row {
      display: flex;
      gap: 8px;
      margin-bottom: 8px;
    }

    .field-row input {
      flex: 1;
      border-radius: 999px;
      border: 1px solid var(--border);
      padding: 7px 10px;
      font-size: 13px;
    }

    .field-row input:focus {
      outline: 2px solid var(--accent);
      outline-offset: 1px;
      border-color: transparent;
    }

    .btn {
      width: 100%;
      border-radius: 999px;
      border: none;
      padding: 9px 0;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.08s ease, box-shadow 0.08s ease, background 0.08s ease;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--accent), #2563eb);
      color: white;
      box-shadow: 0 9px 18px rgba(37, 99, 235, 0.3);
      margin-bottom: 8px;
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 12px 24px rgba(37, 99, 235, 0.38);
    }

    .btn-outline {
      background: white;
      border: 1px solid var(--border);
      color: var(--primary);
      font-size: 12px;
      padding: 7px 0;
    }

    .change-rating {
      margin-top: 10px;
      text-align: center;
      font-size: 12px;
      color: var(--muted);
    }

    .change-rating button {
      border: none;
      background: none;
      color: var(--accent);
      font-size: 12px;
      font-weight: 500;
      cursor: pointer;
      text-decoration: underline;
      padding: 0;
    }

    .footer {
      margin-top: 14px;
      text-align: center;
      font-size: 10px;
      color: #9ca3af;
    }

    .code-pill {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 4px 8px;
      border-radius: 999px;
      background: #e0f2fe;
      color: #0369a1;
      font-size: 11px;
      font-weight: 600;
      margin-top: 4px;
    }

    a.btn-link {
      display: inline-flex;
      justify-content: center;
      align-items: center;
      width: 100%;
      text-decoration: none;
    }

    @media (max-width: 400px) {
      .card {
        padding: 18px 16px 16px;
      }
    }
  </style>
</head>
<body>
  <div class="card">
    <div class="brand-row">
      <div class="business-name" id="businessName">Your Business Name</div>
      <div class="rr-badge">
        <span class="rr-logo">RR</span>
        <span>ReviewResq</span>
      </div>
    </div>

    <div id="introSection">
      <div class="title">How was your experience today?</div>
      <div class="subtitle">Your feedback helps us improve and keeps our team on point.</div>
      <div class="pill-row">
        <div class="pill"><span class="pill-dot"></span> Takes ~10 seconds</div>
        <div class="pill"><span class="pill-dot"></span> No sign-in required</div>
        <div class="pill"><span class="pill-dot"></span> For quality improvement</div>
      </div>
    </div>

    <!-- Rating Area -->
    <div class="rating-section">
      <div class="rating-label">Tap a rating to continue</div>
      <div class="stars" id="stars">
        <span class="star" data-value="1">★</span>
        <span class="star" data-value="2">★</span>
        <span class="star" data-value="3">★</span>
        <span class="star" data-value="4">★</span>
        <span class="star" data-value="5">★</span>
      </div>
      <div class="current-rating" id="currentRating">No rating selected yet</div>
    </div>

    <!-- Negative feedback view (1–3) -->
    <div id="negativeView" class="view">
      <div class="view-title">Help us make this better</div>
      <div class="view-text">
        Something wasn’t perfect? Tell us what happened so we can fix it for next time.
      </div>
      <textarea id="negMessage" placeholder="Tell us what we could have done better..."></textarea>
      <div class="field-row">
        <input id="negName" type="text" placeholder="Name (optional)" />
        <input id="negEmail" type="email" placeholder="Email (optional)" />
      </div>
      <button class="btn btn-primary" id="sendNegBtn">Send feedback</button>
      <div class="view-text" style="margin-top:6px;font-size:11px;">
        We read every message and use it to improve.
      </div>
    </div>

    <!-- Positive feedback view (4–5) -->
    <div id="positiveView" class="view">
      <div class="view-title">Thank you for the great rating!</div>
      <div class="view-text">
        A quick public review really helps other people discover this business.
      </div>
      <a class="btn-link" id="googleLink" target="_blank" rel="noopener">
        <button class="btn btn-primary">Leave a Google review</button>
      </a>
      <div class="view-text" style="margin-top:8px;">
        As a thank-you, show this code on your next visit:
      </div>
      <div class="code-pill">RETURN10</div>
    </div>

    <!-- Thank-you view after negative feedback sent -->
    <div id="thanksView" class="view">
      <div class="view-title">Thank you for your feedback</div>
      <div class="view-text">
        We appreciate you taking the time to share this with us. It really helps us improve.
      </div>
      <div class="view-text">
        If you'd like to speak with someone directly, just reply to the message you received this link from.
      </div>
    </div>

    <div class="change-rating" id="changeRatingContainer" style="display:none;">
      Not the right rating?
      <button id="changeRatingBtn" type="button">Change rating</button>
    </div>

    <div class="footer">
      Powered by ReviewResq
    </div>
  </div>

  <script>
    // ===== CONFIG =====
    const BUSINESS_NAME = "Your Business Name"; // לשנות לשם העסק
    const GOOGLE_REVIEW_URL = "https://g.page/r/YOURPLACEID/review"; // קישור אמיתי לדף הביקורות בגוגל
    const FORM_ENDPOINT = "https://formspree.io/f/YOUR_FORM_ID"; // להחליף ל-URL מ-Formspree

    document.getElementById("businessName").innerText = BUSINESS_NAME;
    document.getElementById("googleLink").href = GOOGLE_REVIEW_URL;

    // ===== STATE =====
    let selectedRating = null;

    const stars = document.querySelectorAll(".star");
    const currentRatingEl = document.getElementById("currentRating");
    const introSection = document.getElementById("introSection");
    const negativeView = document.getElementById("negativeView");
    const positiveView = document.getElementById("positiveView");
    const thanksView = document.getElementById("thanksView");
    const changeRatingContainer = document.getElementById("changeRatingContainer");
    const changeRatingBtn = document.getElementById("changeRatingBtn");
    const sendNegBtn = document.getElementById("sendNegBtn");

    function setView(viewName) {
      negativeView.classList.remove("active");
      positiveView.classList.remove("active");
      thanksView.classList.remove("active");

      if (viewName === "negative") negativeView.classList.add("active");
      if (viewName === "positive") positiveView.classList.add("active");
      if (viewName === "thanks") thanksView.classList.add("active");
    }

    function resetAll() {
      selectedRating = null;
      stars.forEach(s => s.classList.remove("selected"));
      currentRatingEl.textContent = "No rating selected yet";
      introSection.style.display = "block";
      setView(null);
      changeRatingContainer.style.display = "none";
      document.getElementById("negMessage").value = "";
      document.getElementById("negName").value = "";
      document.getElementById("negEmail").value = "";
    }

    stars.forEach(star => {
      star.addEventListener("click", () => {
        selectedRating = parseInt(star.dataset.value, 10);

        // Visual selection
        stars.forEach(s => {
          const value = parseInt(s.dataset.value, 10);
          if (value <= selectedRating) {
            s.classList.add("selected");
          } else {
            s.classList.remove("selected");
          }
        });

        currentRatingEl.textContent = "Current rating: " + selectedRating + " ★";

        // Hide intro once a rating is chosen
        introSection.style.display = "none";
        changeRatingContainer.style.display = "block";

        if (selectedRating <= 3) {
          setView("negative");
        } else {
          setView("positive");
        }
      });
    });

    changeRatingBtn.addEventListener("click", () => {
      resetAll();
    });

    // שליחת פידבק שלילי דרך Formspree
    sendNegBtn.addEventListener("click", async () => {
      if (!selectedRating || selectedRating > 3) return;

      const msg   = document.getElementById("negMessage").value.trim();
      const name  = document.getElementById("negName").value.trim();
      const email = document.getElementById("negEmail").value.trim();

      if (!msg) {
        alert("Please share a few words so we know what to improve.");
        return;
      }

      const payload = {
        business: BUSINESS_NAME,
        rating: selectedRating,
        message: msg,
        name: name || "Not provided",
        email: email || "Not provided"
      };

      try {
        await fetch(FORM_ENDPOINT, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Accept": "application/json"
          },
          body: JSON.stringify(payload)
        });

        // הצליח – מראים תודה נקייה במסך
        setView("thanks");
      } catch (err) {
        console.error(err);
        alert("Something went wrong. Please try again in a moment.");
      }
    });
  </script>
</body>
</html>
