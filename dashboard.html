<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ReviewResQ ‚Äì Dashboard</title>
  <meta
    name="description"
    content="ReviewResQ dashboard ‚Äì monitor your business profile, review funnel stats, and recent feedback."
  />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
    rel="stylesheet"
  />
  <link rel="stylesheet" href="dashboard.css" />
</head>
<body>
  <div class="page">
    <header class="app-header">
      <div class="brand">
        <div class="brand-mark">RR</div>
        <div class="brand-copy">
          <div class="brand-row">
            <span class="brand-name">ReviewResQ</span>
            <span class="chip chip-soft" id="planBadge">Basic plan</span>
          </div>
          <span class="brand-sub">Customer feedback control center</span>
        </div>
      </div>
      <div class="header-actions">
        <div class="user-block">
          <span class="user-label">Signed in</span>
          <span class="user-email" id="userEmailDisplay">Loading‚Ä¶</span>
        </div>
        <button class="btn ghost" id="logoutBtn">Log out</button>
      </div>
    </header>

    <main class="app-shell">
      <div id="globalBanner" class="global-banner">
        <div class="banner-text" id="globalBannerText"></div>
        <button class="icon-btn" id="bannerDismiss" aria-label="Dismiss alert">‚úï</button>
      </div>

      <section id="emptyState" class="empty-state">
        <div class="surface empty-card">
          <div class="empty-hero">üöÄ</div>
          <h1>Finish onboarding to unlock your dashboard</h1>
          <p>
            Complete your business profile to generate your ReviewResQ portal link, start
            collecting reviews, and track feedback in one place.
          </p>
          <a class="btn primary" href="/onboarding.html">Resume onboarding</a>
        </div>
      </section>

      <section id="dashContent" class="dash-content">
        <div class="surface hero">
          <div class="hero-meta">
            <div class="avatar-group" aria-hidden="true">
              <div class="avatar" id="bizLogoInitials">RR</div>
              <img id="bizLogoImg" class="avatar" alt="Business logo" />
            </div>
            <div>
              <p class="eyebrow">Overview</p>
              <h1 class="hero-title" id="bizNameDisplay">Your business</h1>
              <div class="meta-row">
                <span class="pill success" id="bizStatusBadge">Live ¬∑ Ready</span>
                <span class="pill" id="bizCategoryText">Business category</span>
                <span class="pill muted">Updated <span id="bizUpdatedAt">just now</span></span>
              </div>
            </div>
          </div>
          <div class="hero-actions">
            <button class="btn primary" data-action="portal-preview">Preview portal</button>
            <button class="btn secondary" data-action="portal-open">Open live view</button>
            <a class="btn ghost" id="advancedDashboardBtn" href="/dashboard-advanced.html" style="display:none">Advanced dashboard</a>
            <button class="btn ghost" id="editProfileBtn">Edit profile</button>
          </div>
        </div>

        <div class="grid stats-grid">
          <div class="surface stat-card">
            <p class="stat-label">Average rating</p>
            <div class="stat-value" id="averageRatingValue">‚Äì</div>
            <p class="stat-hint">Across public reviews</p>
          </div>
          <div class="surface stat-card">
            <p class="stat-label">Public reviews</p>
            <div class="stat-value" id="totalReviewsValue">0</div>
            <p class="stat-hint">Google and published feedback</p>
          </div>
          <div class="surface stat-card">
            <p class="stat-label">Private feedback</p>
            <div class="stat-value" id="privateFeedbackValue">0</div>
            <p class="stat-hint">Shared privately via your portal</p>
          </div>
          <div class="surface stat-card">
            <p class="stat-label">Google average</p>
            <div class="stat-value" id="googleAverageValue">‚Äì</div>
            <p class="stat-hint">Average from Google-tagged reviews</p>
          </div>
          <div class="surface stat-card">
            <p class="stat-label">Low-rating average</p>
            <div class="stat-value" id="badAverageValue">‚Äì</div>
            <p class="stat-hint">1‚Äì3‚òÖ feedback to monitor trends</p>
          </div>
          <div class="surface stat-card">
            <p class="stat-label">Public reviews since joining</p>
            <div class="stat-value" id="totalReviewsSinceValue">0</div>
            <p class="stat-hint">Collected after connecting ReviewResQ</p>
          </div>
        </div>

        <p class="stats-note" id="reviewTotalsNote"></p>

        <div class="grid main-grid">
          <div class="surface card">
            <div class="card-header">
              <div>
                <p class="eyebrow">Customer portal</p>
                <h2>Share your portal link</h2>
                <p class="card-sub">
                  Send customers to your ReviewResQ portal to collect reviews and private feedback.
                </p>
              </div>
              <span class="chip">Always-on</span>
            </div>
            <div class="input-row">
              <input
                id="portalLinkInput"
                type="text"
                readonly
                value="Loading portal link‚Ä¶"
                aria-label="Customer portal link"
              />
              <button class="btn ghost" id="portalCopyBtn">Copy</button>
            </div>
            <div class="button-row">
              <button class="btn primary" data-action="portal-preview">Preview as owner</button>
              <button class="btn secondary" data-action="portal-open">Open shared link</button>
            </div>
          </div>

          <div class="surface card upgrade-card">
            <div class="card-header">
              <div>
                <p class="eyebrow">Upgrade</p>
                <h2 class="subdued-title">Unlock the Advanced plan</h2>
                <p class="card-sub">Get priority support, faster alerts, and premium branding controls.</p>
              </div>
              <span class="chip chip-soft">Recommended</span>
            </div>
            <p class="card-sub">
              Customers on Advanced keep happier reviewers flowing to their portal and see faster follow-ups for
              low ratings.
            </p>
            <div class="button-row">
              <button class="btn primary" id="upgradeCtaBtn">Upgrade to Advanced</button>
            </div>
          </div>
        </div>

        <div class="grid main-grid">
          <div class="surface card">
            <div class="card-header">
              <div>
                <p class="eyebrow">Overview</p>
                <h2>Your business profile</h2>
                <p class="card-sub">Quick snapshot of your Basic plan settings.</p>
              </div>
              <button class="btn ghost" id="startTrialBtn">Upgrade soon</button>
            </div>
            <div class="data-grid">
              <div class="data-row">
                <span class="label">Business name</span>
                <span class="value" data-bind="bizName">Your business</span>
              </div>
              <div class="data-row">
                <span class="label">Category</span>
                <span class="value" data-bind="bizCategory">Business category</span>
              </div>
              <div class="data-row">
                <span class="label">Status</span>
                <span class="pill success" data-bind="bizStatus">Live ¬∑ Ready</span>
              </div>
              <div class="data-row">
                <span class="label">Last updated</span>
                <span class="value" data-bind="bizUpdated">just now</span>
              </div>
            </div>
          </div>

          <div class="surface card feedback-card">
            <div class="card-header">
              <div>
                <p class="eyebrow">Latest feedback</p>
                <h2>Customer voices</h2>
                <p class="card-sub">Recent public reviews and private submissions.</p>
              </div>
            </div>
            <div class="table-wrap">
              <table class="feedback-table">
                <thead>
                  <tr>
                    <th>Date</th>
                    <th>Customer</th>
                    <th>Rating</th>
                    <th>Type</th>
                    <th>Message</th>
                  </tr>
                </thead>
                <tbody id="recentFeedbackBody"></tbody>
                <caption class="sr-only">Recent feedback from your customers</caption>
              </table>
              <div id="feedbackEmptyState" class="feedback-empty">No feedback yet. Start sharing your portal to collect responses.</div>
            </div>
          </div>
        </div>

        <div class="grid main-grid">
          <div class="surface card logo-upload-card">
            <div class="card-header">
              <div>
                <p class="eyebrow">Branding</p>
                <h2>Upload your logo</h2>
                <p class="card-sub">Show your brand on the portal and in the dashboard header.</p>
              </div>
              <span class="chip chip-soft">Optional</span>
            </div>

            <div class="logo-upload-row">
              <div class="logo-preview-circle">
                <span id="logoUploadPlaceholder">RR</span>
                <img id="logoUploadPreview" alt="Logo preview" />
              </div>
              <div class="logo-upload-body">
                <label for="dashLogoUpload" class="label">Choose a logo file</label>
                <input id="dashLogoUpload" type="file" accept="image/*" />
                <p class="helper-text" id="logoUploadStatus">
                  PNG or JPG works best. Upload a square image for the cleanest result.
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <div id="editProfileModal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="editProfileTitle">
    <div class="modal-content">
      <button class="icon-btn close-btn" id="editModalClose" aria-label="Close edit dialog">‚úï</button>
      <p class="eyebrow">Business details</p>
      <h3 id="editProfileTitle">Edit profile</h3>
      <form id="editProfileForm" class="modal-grid">
        <div class="field">
          <p class="label">Business name</p>
          <input id="editBizName" type="text" placeholder="My company" required />
        </div>
        <div class="field">
          <p class="label">Category</p>
          <input id="editBizCategory" type="text" placeholder="Plumber, spa, salon" />
        </div>
        <div class="field">
          <p class="label">Phone</p>
          <input id="editBizPhone" type="tel" placeholder="555-555-5555" />
        </div>
        <div class="field">
          <p class="label">Contact email</p>
          <input id="editBizEmail" type="email" placeholder="you@example.com" />
        </div>
        <div class="field">
          <p class="label">Website</p>
          <input id="editBizWebsite" type="url" placeholder="https://yourdomain.com" />
        </div>
        <div class="field">
          <p class="label">Plan</p>
          <select id="editPlanSelect">
            <option value="basic">Basic</option>
            <option value="advanced">Advanced</option>
          </select>
        </div>
        <div class="field" style="grid-column: 1 / -1; display:flex; justify-content:flex-end; gap:10px;">
          <button type="button" class="btn ghost" id="editCancelBtn">Cancel</button>
          <button type="submit" class="btn primary">Save changes</button>
        </div>
      </form>
    </div>
  </div>

  <div id="feedbackModal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="feedbackModalTitle">
    <div class="modal-content">
      <button class="icon-btn close-btn" id="feedbackModalClose" aria-label="Close details">‚úï</button>
      <p class="eyebrow">Feedback details</p>
      <h3 id="feedbackModalTitle">Customer voice</h3>
      <div class="modal-grid">
        <div>
          <p class="label">Date</p>
          <p class="value" id="modalDate">‚Äî</p>
        </div>
        <div>
          <p class="label">Customer</p>
          <p class="value" id="modalCustomer">‚Äî</p>
        </div>
        <div>
          <p class="label">Rating</p>
          <p class="value" id="modalRating">‚Äî</p>
        </div>
        <div>
          <p class="label">Type</p>
          <p class="value" id="modalType">‚Äî</p>
        </div>
        <div>
          <p class="label">Business</p>
          <p class="value" id="modalBusiness">‚Äî</p>
        </div>
        <div>
          <p class="label">Follow-up status</p>
          <p class="value" id="modalNextAction">To review</p>
        </div>
      </div>

      <div class="modal-section">
        <p class="label">Message</p>
        <p class="value" id="modalMessage">‚Äî</p>
      </div>

      <div class="modal-grid">
        <div>
          <p class="label">Customer phone</p>
          <p class="value" id="modalPhone">Not provided</p>
        </div>
        <div>
          <p class="label">Customer email</p>
          <p class="value" id="modalEmail">Not provided</p>
        </div>
        <div>
          <p class="label">Internal notes</p>
          <p class="value" id="modalNotes">No notes yet</p>
        </div>
      </div>

      <div class="modal-section tips-box">
        <p class="label">Tips for responding</p>
        <p class="value">
          Thank the customer for sharing, acknowledge their experience, and offer a clear next step.
          Example: ‚ÄúHi [Name], thanks for telling us. I‚Äôm sorry this fell short. I‚Äôd like to make it
          right‚Äîcan we connect today to fix this?‚Äù
        </p>
      </div>
    </div>
  </div>

  <script type="module" src="dashboard.js"></script>
</body>
</html>
