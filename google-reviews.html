<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ReviewResQ ‚Äì Google Reviews</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="icon" href="/logo.png" />
  <script src="/runtime-env.js"></script>
  <link rel="stylesheet" href="dashboard.css" />
</head>
<body>
  <div class="app-shell">
    <aside class="sidebar">
      <div class="brand">
        <div class="brand-mark">RR</div>
        <div class="brand-name">ReviewResQ</div>
      </div>
      <nav class="global-nav" aria-label="Dashboard navigation">
        <a class="nav-tab" data-route="dashboard" href="dashboard.html"><span class="nav-icon">üè†</span><span>Overview</span></a>
        <a class="nav-tab" data-route="inbox" href="feedback.html"><span class="nav-icon">üí¨</span><span>Customer Feedback</span></a>
        <a class="nav-tab" data-route="google-reviews" href="google-reviews.html"><span class="nav-icon">‚òÖ</span><span>Google Reviews</span></a>
        <a class="nav-tab" data-route="funnel" href="funnel-settings.html"><span class="nav-icon">‚Üó</span><span>Review Funnel</span></a>
        <a class="nav-tab" data-route="links" href="links.html"><span class="nav-icon">üîó</span><span>Review Links</span></a>
        <a class="nav-tab" data-route="alerts" href="alerts.html"><span class="nav-icon">üîî</span><span>Alerts &amp; Notifications</span></a>
        <a class="nav-tab" data-route="ai-agent" href="ai-agent.html"><span class="nav-icon">ü§ñ</span><span>AI Phone Agent</span></a>
        <a class="nav-tab" data-route="ai-agent" href="ai-agent.html#pro-suite"><span class="nav-icon">‚ö°</span><span>Pro AI Suite</span></a>
        <a class="nav-tab" data-route="account" href="billing.html"><span class="nav-icon">üí≥</span><span>Account &amp; Billing</span></a>
      </nav>
    </aside>

    <div class="main">
      <header class="topbar">
        <div class="topbar-title">Google reviews</div>
        <div class="topbar-right">
          <span class="badge" data-plan-badge>‚Äî</span>
          <a class="btn btn-outline" href="billing.html">Account &amp; billing</a>
          <button class="btn btn-link" type="button" onclick="window.location.href='auth.html'">Log out</button>
        </div>
      </header>

      <div class="page-shell">
        <header class="page-header">
          <div>
            <p class="page-title">Google Reviews</p>
            <p class="page-subtitle">See how your business appears on Google.</p>
          </div>
          <div class="page-header-actions">
            <button class="btn btn-link" type="button" data-change-google style="display:none;">Not the right business? Change Google profile</button>
          </div>
        </header>

        <div data-google-connect-slot></div>

        <div data-google-connected>
          <div class="layout-grid two-column">
            <section class="card">
              <p class="card-title">Business profile</p>
              <div class="stacked">
                <div class="business-row">
                  <div class="avatar" data-google-avatar>R</div>
                  <div>
                    <p class="strong" data-google-business-name>‚Äî</p>
                    <p class="card-subtitle" data-google-business-subtitle>‚Äî</p>
                  </div>
                </div>
                <div class="badge-row">
                  <span class="badge" data-google-rating>Google rating ‚Äî</span>
                  <span class="badge" data-google-count>0 reviews</span>
                  <span class="badge badge-muted" data-google-connection-state style="display:none;"></span>
                  <span class="badge badge-success" data-google-verification>Verified</span>
                </div>
              </div>
            </section>

            <section class="card">
              <p class="card-title">Rating summary</p>
              <div class="list">
                <div class="rating-row" data-rating-row="5"><span>5 stars</span><span class="rating-value">‚Äî</span></div>
                <div class="rating-row" data-rating-row="4"><span>4 stars</span><span class="rating-value">‚Äî</span></div>
                <div class="rating-row" data-rating-row="3"><span>3 stars</span><span class="rating-value">‚Äî</span></div>
                <div class="rating-row" data-rating-row="2"><span>2 stars</span><span class="rating-value">‚Äî</span></div>
                <div class="rating-row" data-rating-row="1"><span>1 star</span><span class="rating-value">‚Äî</span></div>
              </div>
            </section>
          </div>

          <section class="card">
            <p class="card-title">Rating distribution</p>
            <div class="chart-placeholder">Distribution visualization</div>
          </section>

          <section class="card">
            <p class="card-title">Latest Google reviews</p>
            <div class="review-list" data-google-review-list>Loading...</div>
          </section>
        </div>

        <div data-google-upsell></div>
      </div>
    </div>
  </div>
    <script type="module">
      const runtimeEnv = window.RUNTIME_ENV || {};
      const deriveFunctionsBase = () => {
        const configured =
          runtimeEnv.FUNCTIONS_BASE_URL ||
          runtimeEnv.GOOGLE_PLACES_PROXY_URL ||
          runtimeEnv.GOOGLE_FUNCTIONS_BASE_URL;
        if (configured) {
          try {
            const url = new URL(configured);
            return `${url.origin}`;
          } catch (err) {
            console.warn(
              "[google-reviews] unable to parse configured functions base",
              configured,
              err
            );
          }
        }
        return "https://us-central1-reviewresq-app.cloudfunctions.net";
      };

      const functionsBaseUrl = deriveFunctionsBase();
      const buildId = Date.now().toString();

      window.__REVIEWRESQ_BUILD_ID = buildId;
      window.__FUNCTIONS_BASE_URL = functionsBaseUrl;

      import(`./google-reviews.js?v=${encodeURIComponent(buildId)}`);
    </script>
    <script src="dashboard-nav.js"></script>
  </body>
  </html>
