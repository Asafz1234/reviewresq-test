<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ReviewResQ â€“ Ask for reviews</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="icon" type="image/png" href="/logo.png" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="/dashboard.css" />
</head>
<body>
  <div class="app-shell">
    <aside class="sidebar">
      <div class="brand">
        <div class="brand-mark">RR</div>
        <div class="brand-name">ReviewResQ</div>
      </div>
      <nav class="global-nav" aria-label="Dashboard navigation">
        <a class="nav-tab" data-route="dashboard" href="/dashboard.html"><span class="nav-icon">ğŸ </span><span>Overview</span></a>
        <a class="nav-tab" data-route="ask-reviews" href="/ask-reviews.html"><span class="nav-icon">âœ‰ï¸</span><span>Ask for reviews</span></a>
        <a class="nav-tab" data-route="inbox" href="/feedback.html"><span class="nav-icon">ğŸ’¬</span><span>Customer Feedback</span></a>
        <a class="nav-tab" data-route="google-reviews" href="/google-reviews.html"><span class="nav-icon">â˜…</span><span>Google Reviews</span></a>
        <a class="nav-tab" data-route="customers" href="/customers.html"><span class="nav-icon">ğŸ‘¥</span><span>Customers</span></a>
        <a class="nav-tab" data-route="campaigns" href="/campaigns.html"><span class="nav-icon">ğŸ“¢</span><span>Campaigns</span></a>
        <a class="nav-tab" data-route="funnel" href="/funnel-settings.html"><span class="nav-icon">â†—</span><span>Review Funnel</span></a>
        <a class="nav-tab" data-route="links" href="/links.html"><span class="nav-icon">ğŸ”—</span><span>Review Links</span></a>
        <a class="nav-tab" data-route="alerts" href="/alerts.html"><span class="nav-icon">ğŸ””</span><span>Alerts &amp; Notifications</span></a>
        <a class="nav-tab" data-route="ai-agent" href="/ai-agent.html"><span class="nav-icon">ğŸ¤–</span><span>AI Phone Agent</span></a>
        <a class="nav-tab" data-route="ai-agent" href="/ai-agent.html#pro-suite"><span class="nav-icon">âš¡</span><span>Pro AI Suite</span></a>
        <a class="nav-tab" data-route="business-settings" href="/business-settings.html"><span class="nav-icon">ğŸ¨</span><span>Business Settings</span></a>
        <a class="nav-tab" data-route="account" href="/billing.html"><span class="nav-icon">ğŸ’³</span><span>Account &amp; Billing</span></a>
      </nav>
      <div class="setup-status" id="setupStatus">Setup: checkingâ€¦</div>
    </aside>

    <div class="main">
      <header class="topbar">
        <div class="topbar-title">Ask for reviews</div>
        <div class="topbar-right">
          <span class="badge" data-plan-label>Starter</span>
          <a class="btn btn-outline" href="/billing.html">Account &amp; billing</a>
          <button class="btn btn-link" type="button" onclick="window.location.href='/auth.html'">Log out</button>
        </div>
      </header>

      <div class="page-shell">
        <header class="page-header">
          <p class="page-title">Ask for reviews</p>
          <p class="page-subtitle">Generate review request links for customers.</p>
        </header>

        <div class="notice" id="brandingBlocker" hidden>
          <div>
            <p class="card-title">Setup your business (1 minute)</p>
            <p class="card-subtitle" id="brandingBlockerMessage"></p>
          </div>
          <div class="button-row">
            <a class="btn btn-primary" id="completeSettingsBtn" href="/business-settings.html?return=dashboard">Complete settings</a>
          </div>
        </div>

        <section class="card">
          <div class="card-header">
            <div>
              <p class="card-title">Single request</p>
              <p class="card-subtitle">Create a one-off request for any customer.</p>
            </div>
          </div>
          <form id="singleRequestForm" class="stack" novalidate>
            <div class="input-grid">
              <label class="label">
                <span>Customer name <span class="text-muted">(required)</span></span>
                <input class="input" type="text" id="singleName" name="name" required placeholder="Jane Doe" />
              </label>
              <label class="label">
                <span>Phone <span class="text-muted">(optional)</span></span>
                <input class="input" type="tel" id="singlePhone" name="phone" placeholder="(555) 123-4567" />
              </label>
              <label class="label">
                <span>Email <span class="text-muted" id="singleEmailHint">(optional)</span></span>
                <input class="input" type="email" id="singleEmail" name="email" placeholder="name@email.com" />
              </label>
              <label class="label">
                <span>Channel</span>
                <select class="input" id="channelSelect" name="channel">
                  <option value="link">Link</option>
                  <option value="sms" disabled>SMS (coming soon)</option>
                  <option value="email">Email</option>
                </select>
              </label>
            </div>
            <div class="button-row">
              <button class="btn btn-primary" type="submit" id="generateSingleBtn">Generate &amp; Copy Link</button>
            </div>
            <div class="pill pill-success" id="emailSuccess" hidden>Email sent</div>
            <div class="pill pill-error" id="emailError" hidden></div>
            <div class="card muted-card" id="singleResult" hidden>
              <p class="card-title">Portal link</p>
              <div class="input-row">
                <input class="input" type="text" id="singleLinkOutput" readonly />
                <div class="button-row">
                  <button class="btn btn-outline" type="button" id="copySingleLink">Copy link</button>
                  <button class="btn btn-primary" type="button" id="downloadSingleQr">Download QR code</button>
                </div>
              </div>
            </div>
          </form>
        </section>

        <section class="card" id="bulkSection" hidden>
          <div class="card-header">
            <div>
              <p class="card-title">Bulk requests</p>
              <p class="card-subtitle">Select multiple customers to generate links for each.</p>
            </div>
          </div>
          <form id="bulkRequestForm" class="stack" novalidate>
            <label class="label">
              <span>Customers</span>
              <select class="input" id="bulkCustomerList" multiple size="6"></select>
            </label>
            <div class="button-row">
              <button class="btn btn-primary" type="submit" id="generateBulkBtn" disabled>Generate links</button>
              <button class="btn btn-outline" type="button" id="downloadCsvBtn" disabled>Download CSV</button>
            </div>
            <div class="card muted-card" id="bulkResults" hidden>
              <p class="card-title">Generated links</p>
              <div class="table-wrapper">
                <table class="table">
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Contact</th>
                      <th>Link</th>
                    </tr>
                  </thead>
                  <tbody id="bulkResultsBody"></tbody>
                </table>
              </div>
            </div>
          </form>
        </section>

        <section class="card">
          <div class="card-header">
            <div>
              <p class="card-title">Request activity</p>
              <p class="card-subtitle">Track sent review requests and engagement.</p>
            </div>
            <div class="input-grid" style="grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); max-width: 540px">
              <label class="label">
                <span>Date range</span>
                <select class="input" id="requestRange">
                  <option value="thisMonth">This month</option>
                  <option value="all">All time</option>
                  <option value="custom">Custom</option>
                </select>
              </label>
              <label class="label" id="customStartWrapper" hidden>
                <span>Start</span>
                <input class="input" type="date" id="requestStart" />
              </label>
              <label class="label" id="customEndWrapper" hidden>
                <span>End</span>
                <input class="input" type="date" id="requestEnd" />
              </label>
            </div>
          </div>
          <div class="table-wrapper">
            <table class="table">
              <thead>
                <tr>
                  <th>Customer</th>
                  <th>Channel</th>
                  <th>Sent</th>
                  <th>Opened</th>
                  <th>Clicked</th>
                  <th>Status</th>
                  <th>Date</th>
                </tr>
              </thead>
              <tbody id="outboundTableBody">
                <tr id="outboundEmptyRow">
                  <td colspan="7" style="text-align: center; color: #6b7280; padding: 16px">No requests yet</td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>
      </div>
    </div>
  </div>

  <div class="toast" id="askToast" role="status" aria-live="polite"></div>

  <script type="module" src="/pages/ask-reviews.js"></script>
  <script src="/dashboard-nav.js"></script>
</body>
</html>
