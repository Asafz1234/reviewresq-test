<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Login - ReviewResQ</title>
  <link rel="stylesheet" href="styles.css" />
</head>

<body>

  <div class="container">
    <h2>Login to Your Dashboard</h2>

    <input id="businessId" type="text" placeholder="Enter Business ID" />

    <button onclick="login()">Login</button>
  </div>

  <!-- Script for Firestore -->
  <script type="module">
    import { db } from "./firebase.js";
    import {
      getFirestore,
      doc,
      getDoc
    } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    console.log("Login page connected to Firestore");

    // ğŸŸ¢ ×”×¤×•× ×§×¦×™×” ×©×—×¡×¨×” ××¦×œ×š
    window.login = async function () {
      console.log("Login() triggered");

      const id = document.getElementById("businessId").value.trim();
      if (!id) return alert("Please enter your Business ID");

      const ref = doc(db, "businesses", id);
      const snapshot = await getDoc(ref);

      if (!snapshot.exists()) {
        alert("Business ID not found");
        return;
      }

      // ×× ×§×™×™× â€” ×©××•×¨ ×‘×œ×•×§××œ ×¡×˜×•×¨×’'
      localStorage.setItem("businessId", id);

      // ×¢×‘×•×¨ ×œ×“×©×‘×•×¨×“
      window.location.href = "dashboard.html";
    };
  </script>

  <script type="module" src="firebase.js"></script>

</body>
</html>
